/*!
 * Gist Simple v2.0.0 (https://github.com/nk-o/gist-simple)
 * Copyright 2023 nK <https://nkdev.info>
 * Licensed under MIT (https://github.com/nk-o/gist-simple/blob/master/LICENSE)
 */
function e(e,...n){return e=e||{},Object.keys(n).forEach((t=>{n[t]&&Object.keys(n[t]).forEach((i=>{e[i]=n[t][i]}))})),e}function n(){this.doneCallbacks=[],this.failCallbacks=[]}n.prototype={execute(e,n){let t=e.length;for(n=Array.prototype.slice.call(n);t;)t-=1,e[t].apply(null,n)},resolve(...e){this.execute(this.doneCallbacks,e)},reject(...e){this.execute(this.failCallbacks,e)},done(e){this.doneCallbacks.push(e)},fail(e){this.failCallbacks.push(e)}};const t="__gist_simple_jsonp__";const i="__gist_simple_css_loaded__";var o={id:"",file:"",caption:"",lines:"",linesExpanded:!1,highlightLines:"",showFooter:!0,showLineNumbers:!0,enableCache:!0,onInit:null,onInitEnd:null,onDestroy:null,onDestroyEnd:null,onAjaxBeforeSend:null,onAjaxSuccess:null,onAjaxLoaded:null};const s={};let l=0;class r{constructor(n,t){const i=this;i.instanceID=l,l+=1,i.$container=n,i.defaults={...o};const s=i.$container.dataset||{},r={};Object.keys(s).forEach((e=>{e&&void 0!==i.defaults[e]&&(r[e]=s[e])})),i.options=e({},i.defaults,r,t),i.pureOptions=e({},i.options),Object.keys(i.options).forEach((e=>{"true"===i.options[e]?i.options[e]=!0:"false"===i.options[e]&&(i.options[e]=!1)})),i.init()}init(){const e=this,{options:o}=e,l=`https://gist.github.com/${o.id}.json`,{lines:r}=o,c={};if(e.options.onInit&&e.options.onInit.call(e),o.file&&(c.file=o.file),e.$container.classList.add("gist-simple"),!o.id)return void e.insertContent("Gist ID is required",!0);const a=l+o.file,p=o.enableCache||s[a];function d(n){const t=document.createElement("div");t.innerHTML=n.div,t.firstChild&&t.firstChild.removeAttribute("id"),e.insertContent(t.innerHTML),e.highlightLines(o.highlightLines),e.showSpecificLines(r,o.linesExpanded),e.showCaption(o.caption),o.showFooter||e.removeFooter(),o.showLineNumbers||e.removeLineNumbers(),e.options.onAjaxLoaded&&e.options.onAjaxLoaded.call(e,n)}function f(n){if(n&&n.div){let{stylesheet:e}=n;e?(0===e.indexOf("<link")?(e=e.replace(/\\/g,"").match(/href="([^\s]*)"/),[e]=e):0!==e.indexOf("http")&&(0!==e.indexOf("/")&&(e=`/${e}`),e=`https://gist.github.com${e}`),function(e,n){let t=document.body.querySelector(`link[href="${e}"]`);if(t||(t=document.createElement("link"),t.href=e,t.rel="stylesheet",t.type="text/css",document.head.appendChild(t)),n){if(t[i])return void n(t);t.addEventListener("load",(()=>{t[i]=!0,n(t)}),!1)}}(e,(()=>{d(n)}))):d(n)}else e.insertContent(`Failed loading gist ${l}`,!0)}function u(n){e.insertContent(`Failed loading gist ${l}: ${n}`,!0)}e.insertContent('<svg width="30" height="30" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n  <style>\n    .gist_simple_spinner_nOfF {\n      animation: gist_simple_spinner_qtyZ 2s cubic-bezier(0.36, .6, .31, 1) infinite\n    }\n\n    .gist_simple_spinner_fVhf {\n      animation-delay: -.5s\n    }\n\n    .gist_simple_spinner_piVe {\n      animation-delay: -1s\n    }\n\n    .gist_simple_spinner_MSNs {\n      animation-delay: -1.5s\n    }\n\n    @keyframes gist_simple_spinner_qtyZ {\n      0% {\n        r: 0\n      }\n\n      25% {\n        r: 3px;\n        cx: 4px\n      }\n\n      50% {\n        r: 3px;\n        cx: 12px\n      }\n\n      75% {\n        r: 3px;\n        cx: 20px\n      }\n\n      100% {\n        r: 0;\n        cx: 20px\n      }\n    }\n  </style>\n  <circle fill="rgba(144, 144, 144, 0.6)" class="gist_simple_spinner_nOfF" cx="4" cy="12" r="3" />\n  <circle fill="rgba(144, 144, 144, 0.6)" class="gist_simple_spinner_nOfF gist_simple_spinner_fVhf" cx="4" cy="12"\n    r="3" />\n  <circle fill="rgba(144, 144, 144, 0.6)" class="gist_simple_spinner_nOfF gist_simple_spinner_piVe" cx="4" cy="12"\n    r="3" />\n  <circle fill="rgba(144, 144, 144, 0.6)" class="gist_simple_spinner_nOfF gist_simple_spinner_MSNs" cx="4" cy="12"\n    r="3" />\n</svg>',!0),function(e,n){const{data:i={},beforeSend:o,success:s}=n;if(window[t]=(window[t]||0)+1,i.callback=`${t}_cb_${window[t]}`,Object.keys(i).forEach((n=>{e.match(/\?/)?e+=`&${n}=${i[n]}`:e+=`?${n}=${i[n]}`})),o&&!o())return;let l=document.createElement("script");l.type="text/javascript",l.src=e,window[i.callback]=function(e){s.call(window,e),document.head.removeChild(l),l=null,delete window[i.callback]},document.head.appendChild(l)}(l,{data:c,beforeSend(){if(e.options.onAjaxBeforeSend&&e.options.onAjaxBeforeSend.call(e),p){if(s[a])return s[a].div?(f(s[a]),!1):(s[a].done((e=>{f(e)})),s[a].fail((e=>{u(e)})),!1);s[a]=new n}return!0},success(n){e.options.onAjaxSuccess&&e.options.onAjaxSuccess.call(e,n),p&&s[a]&&s[a].resolve&&(s[a].resolve(n),s[a]=n),f(n)},error(e){u(e)}}),e.options.onInitEnd&&e.options.onInitEnd.call(e)}destroy(){const e=this;e.options.onDestroy&&e.options.onDestroy.call(e),e.$container.innerHTML="",delete e.$container.GistSimple,e.options.onDestroyEnd&&e.options.onDestroyEnd.call(e)}chunkBy(e,n){return 0===e.length?[]:e.slice(1).reduce(((e,t)=>(n(t)?e.push([t]):e.push(e.pop().concat([t])),e)),[e.slice(0,1)])}getLineNumbers(e){const n=[];let t,i;if("number"==typeof e)n.push(e);else{i=e.split(",");for(let e=0;e<i.length;e+=1)if(t=i[e].split("-"),2===t.length)for(let e=parseInt(t[0],10);e<=t[1];e+=1)n.push(e);else 1===t.length&&n.push(parseInt(t[0],10))}return n}insertContent(e,n=!1){n&&(e=`<div class="gist-simple-wrap">${e}</div>`),this.$container.innerHTML=e}highlightLines(e){if(!e)return;const n=this.getLineNumbers(e);this.$container.querySelectorAll("td.line-data").forEach((e=>{e.style.width="100%"})),this.$container.querySelectorAll(".js-file-line").forEach(((e,t)=>{-1!==n.indexOf(t+1)&&(e.style.backgroundColor="rgb(255, 255, 204)")}))}showSpecificLines(e,n){if(!e)return;const t=this.getLineNumbers(e),i=[];if(this.$container.querySelectorAll(".js-file-line").forEach(((e,o)=>{-1===t.indexOf(o+1)&&(n?(i.push(o+1),e.parentNode.style.display="none"):e.parentNode.remove())})),n){this.chunkBy(i,(e=>!i.includes(e-1))).forEach((e=>{const n=e[0],t=n-1,i=e[e.length-1],o=document.createElement("a");o.setAttribute("lines",e.join()),o.style.display="block",o.style.cursor="pointer",o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 44" style="height: 15px; position: relative; top: 2px;">\n  <path fill="#bbb" fill-rule="evenodd"\n    d="M8.0066 16.05305v-7.6523c0-.82422-.47656-1.0273-1.0586-.4414l-3.5117 3.5039c-1.8789 1.875-4.6953-.94142-2.8164-2.8164L8.7215.61564c.68359-.67579 1.8008-.6797 2.4922 0l8.1641 8.0312c1.8789 1.875-.9375 4.6914-2.8164 2.8164l-3.5078-3.5039c-.58984-.58985-1.0625-.38673-1.0625.4414v27.30827c0 .82031.47656 1.0273 1.0586.44141l3.5117-3.5039c1.8789-1.875 4.6953.9375 2.8164 2.8164l-8.1016 8.0273c-.6836.6797-1.8008.6797-2.4922 0l-8.1641-8.0273c-1.8789-1.8789.9375-4.6914 2.8164-2.8164l3.5078 3.5039c.58984.58984 1.0625.38672 1.0625-.4414V16.05304z" />\n</svg>',o.addEventListener("click",(e=>{e.preventDefault(),o.closest("table.highlight").querySelectorAll('tr[style*="display: none"] td[data-line-number]').forEach((function(e){const n=o.getAttribute("lines").split(","),t=e.getAttribute("data-line-number");-1!==n.indexOf(t)&&(e.parentNode.style.display="")})),o.closest("tr").remove()}));const s=`\n          <td\n            class="blob-code blob-code-inner js-file-line collapsed"\n            style="background-color: #f9f9f9; color: #999; font-size: 12px; font-style: italic; padding-top: 5px !important; padding-bottom: 5px !important;"\n          >... Lines ${n} - ${i}</td>\n        `,l=document.createElement("tr");l.innerHTML='\n          <td\n            class="blob-num js-line-number collapsed"\n            style="background-color: #f9f9f9; color: #999; font-size: 12px; font-style: italic; text-align: center; padding-top: 5px !important; padding-bottom: 5px !important;"\n          >\x3c!-- Icon Here --\x3e</td>\n        '+s,l.querySelector("td:first-child").append(o);const r=this.$container.querySelector(`.js-line-number[data-line-number="${0===t?1:t}"]`);r&&(0===t?r.parentElement.before(l):r.parentElement.after(l))}))}}showCaption(e){if(!e)return;const n=this.$container.querySelector("table tbody"),t=document.createElement("tr"),i=document.createElement("td");i.setAttribute("style","padding: 10px !important; border-bottom: 10px solid white; background-color: #f9f9f9; font-weight: bold;"),i.innerHTML=e;const o=document.createElement("td");o.setAttribute("style","background-color: #f9f9f9; border-bottom: 10px solid white;"),t.append(o),t.append(i),n.prepend(t)}removeFooter(){this.$container.querySelector(".gist-meta").remove(),this.$container.querySelector(".gist-data").style.borderBottom="0px",this.$container.querySelector(".gist-file").style.borderBottom="1px solid #ddd"}removeLineNumbers(){this.$container.querySelectorAll(".js-line-number").forEach((e=>{e.remove()})),this.$container.querySelector("table.highlight").style.width="100%"}}const c=function(e,n,...t){("object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)&&(e=[e]);const i=e.length;let o,s=0;for(;s<i;s+=1)if("object"==typeof n||void 0===n?e[s].GistSimple||(e[s].GistSimple=new r(e[s],n)):e[s].GistSimple&&(o=e[s].GistSimple[n].apply(e[s].GistSimple,t)),void 0!==o)return o;return e};c.constructor=r;export{c as default};//# sourceMappingURL=gist-simple.esm.min.js.map
