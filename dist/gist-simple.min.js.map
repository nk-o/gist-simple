{"version":3,"file":"gist-simple.min.js","sources":["../src/utils/ready.js","../src/utils/global.js","../src/utils/extend.js","../src/utils/deferred.js","../src/utils/load-jsonp.js","../src/utils/load-css.js","../src/defaults.js","../src/core.js","../src/core.umd.js"],"sourcesContent":["/**\n * Document ready callback.\n * @param {Function} callback - callback will be fired once Document ready.\n */\nfunction ready(callback) {\n  if (document.readyState === 'complete' || document.readyState === 'interactive') {\n    // Already ready or interactive, execute callback\n    callback();\n  } else {\n    document.addEventListener('DOMContentLoaded', callback, {\n      capture: true,\n      once: true,\n      passive: true,\n    });\n  }\n}\n\nexport default ready;\n","/* eslint-disable import/no-mutable-exports */\n/* eslint-disable no-restricted-globals */\nlet win;\n\nif (typeof window !== 'undefined') {\n  win = window;\n} else if (typeof global !== 'undefined') {\n  win = global;\n} else if (typeof self !== 'undefined') {\n  win = self;\n} else {\n  win = {};\n}\n\nexport default win;\n","/**\n * Extend like jQuery.extend\n *\n * @param {Object} out - output object.\n * @param {...any} args - additional objects to extend.\n *\n * @returns {Object}\n */\nexport default function extend(out, ...args) {\n  out = out || {};\n\n  Object.keys(args).forEach((i) => {\n    if (!args[i]) {\n      return;\n    }\n    Object.keys(args[i]).forEach((key) => {\n      out[key] = args[i][key];\n    });\n  });\n\n  return out;\n}\n","// Deferred\n// thanks http://stackoverflow.com/questions/18096715/implement-deferred-object-without-using-jquery\nfunction Deferred() {\n  this.doneCallbacks = [];\n  this.failCallbacks = [];\n}\n\nDeferred.prototype = {\n  execute(list, args) {\n    let i = list.length;\n    // eslint-disable-next-line no-param-reassign\n    args = Array.prototype.slice.call(args);\n\n    while (i) {\n      i -= 1;\n      list[i].apply(null, args);\n    }\n  },\n  resolve(...args) {\n    this.execute(this.doneCallbacks, args);\n  },\n  reject(...args) {\n    this.execute(this.failCallbacks, args);\n  },\n  done(callback) {\n    this.doneCallbacks.push(callback);\n  },\n  fail(callback) {\n    this.failCallbacks.push(callback);\n  },\n};\n\nexport default Deferred;\n","/**\n * Load JSONP url with callback.\n *\n * @thanks https://gist.github.com/gf3/132080/110d1b68d7328d7bfe7e36617f7df85679a08968\n */\nconst NAME_FLAG = '__gist_simple_jsonp__';\n\nexport default function loadJSONP(url, params) {\n  const { data = {}, beforeSend, success } = params;\n\n  window[NAME_FLAG] = (window[NAME_FLAG] || 0) + 1;\n\n  // Add callback function name.\n  data.callback = `${NAME_FLAG}_cb_${window[NAME_FLAG]}`;\n\n  // Add params to URL.\n  Object.keys(data).forEach((k) => {\n    if (url.match(/\\?/)) {\n      url += `&${k}=${data[k]}`;\n    } else {\n      url += `?${k}=${data[k]}`;\n    }\n  });\n\n  if (beforeSend && !beforeSend()) {\n    return;\n  }\n\n  // Create script\n  let script = document.createElement('script');\n  script.type = 'text/javascript';\n  script.src = url;\n\n  // Setup handler\n  window[data.callback] = function (response) {\n    success.call(window, response);\n    document.head.removeChild(script);\n    script = null;\n    delete window[data.callback];\n  };\n\n  // Load JSON\n  document.head.appendChild(script);\n}\n","/**\n * Load CSS with callback\n */\nconst LOADED_FLAG = '__gist_simple_css_loaded__';\n\nexport default function loadCSS(url, callback) {\n  // Already exists.\n  let el = document.body.querySelector(`link[href=\"${url}\"]`);\n\n  if (!el) {\n    el = document.createElement('link');\n\n    el.href = url;\n    el.rel = 'stylesheet';\n    el.type = 'text/css';\n\n    document.head.appendChild(el);\n  }\n\n  if (callback) {\n    // Is loaded already.\n    if (el[LOADED_FLAG]) {\n      callback(el);\n      return;\n    }\n\n    // Add listener.\n    el.addEventListener(\n      'load',\n      () => {\n        el[LOADED_FLAG] = true;\n\n        callback(el);\n      },\n      false\n    );\n  }\n}\n","export default {\n  id: '',\n  file: '',\n  caption: '',\n  lines: '',\n  linesExpanded: false,\n  highlightLines: '',\n  showFooter: true,\n  showLineNumbers: true,\n  enableCache: true,\n\n  onInit: null, // () => {}\n  onInitEnd: null, // () => {}\n  onDestroy: null, // () => {}\n  onDestroyEnd: null, // () => {}\n  onAjaxBeforeSend: null, // () => {}\n  onAjaxSuccess: null, // (response) => {}\n  onAjaxLoaded: null, // () => {}\n};\n","import extend from './utils/extend';\nimport Deferred from './utils/deferred';\nimport loadJSONP from './utils/load-jsonp';\nimport loadCSS from './utils/load-css';\nimport iconPreloader from './icons/preloader.svg';\nimport iconArrow from './icons/arrow.svg';\nimport defaults from './defaults';\n\nconst cache = {};\nlet instanceID = 0;\n\n// Gist Simple class\nclass GistSimple {\n  constructor(container, userOptions) {\n    const self = this;\n\n    self.instanceID = instanceID;\n\n    instanceID += 1;\n\n    self.$container = container;\n\n    self.defaults = { ...defaults };\n\n    // prepare data-options\n    const dataOptions = self.$container.dataset || {};\n    const pureDataOptions = {};\n    Object.keys(dataOptions).forEach((key) => {\n      if (key && typeof self.defaults[key] !== 'undefined') {\n        pureDataOptions[key] = dataOptions[key];\n      }\n    });\n\n    self.options = extend({}, self.defaults, pureDataOptions, userOptions);\n    self.pureOptions = extend({}, self.options);\n\n    // prepare 'true' and 'false' strings to boolean\n    Object.keys(self.options).forEach((key) => {\n      if (self.options[key] === 'true') {\n        self.options[key] = true;\n      } else if (self.options[key] === 'false') {\n        self.options[key] = false;\n      }\n    });\n\n    self.init();\n  }\n\n  init() {\n    const self = this;\n    const { options } = self;\n    const url = `https://gist.github.com/${options.id}.json`;\n    const { lines } = options;\n    const data = {};\n\n    // call onInit event\n    if (self.options.onInit) {\n      self.options.onInit.call(self);\n    }\n\n    if (options.file) {\n      data.file = options.file;\n    }\n\n    self.$container.classList.add('gist-simple');\n\n    // if the id doesn't exist, then ignore the code block\n    if (!options.id) {\n      self.insertContent('Gist ID is required', true);\n      return;\n    }\n\n    const cacheUrl = url + options.file;\n    const enableCache = options.enableCache || cache[cacheUrl];\n\n    // show preloader.\n    self.insertContent(iconPreloader, true);\n\n    function insertGist(response) {\n      // reference to div\n      const $responseDiv = document.createElement('div');\n      $responseDiv.innerHTML = response.div;\n\n      // remove id for uniqueness constraints\n      if ($responseDiv.firstChild) {\n        $responseDiv.firstChild.removeAttribute('id');\n      }\n\n      self.insertContent($responseDiv.innerHTML);\n\n      // highlight lines\n      self.highlightLines(options.highlightLines);\n\n      // show only specific lines\n      self.showSpecificLines(lines, options.linesExpanded);\n\n      // show caption\n      self.showCaption(options.caption);\n\n      // remove footer\n      if (!options.showFooter) {\n        self.removeFooter();\n      }\n\n      // remove line numbers\n      if (!options.showLineNumbers) {\n        self.removeLineNumbers();\n      }\n\n      // call onAjaxLoaded event\n      if (self.options.onAjaxLoaded) {\n        self.options.onAjaxLoaded.call(self, response);\n      }\n    }\n\n    function successCallback(response) {\n      // the html payload is in the div property\n      if (response && response.div) {\n        let { stylesheet } = response;\n\n        // github returns /assets/embed-id.css now, but let's be sure about that\n        if (stylesheet) {\n          // github passes down html instead of a url for the stylesheet now\n          // parse off the href\n          if (stylesheet.indexOf('<link') === 0) {\n            stylesheet = stylesheet.replace(/\\\\/g, '').match(/href=\"([^\\s]*)\"/);\n            [stylesheet] = stylesheet;\n          } else if (stylesheet.indexOf('http') !== 0) {\n            // add leading slash if missing\n            if (stylesheet.indexOf('/') !== 0) {\n              stylesheet = `/${stylesheet}`;\n            }\n            stylesheet = `https://gist.github.com${stylesheet}`;\n          }\n\n          // Insert gist only after CSS loaded.\n          loadCSS(stylesheet, () => {\n            insertGist(response);\n          });\n        } else {\n          insertGist(response);\n        }\n      } else {\n        self.insertContent(`Failed loading gist ${url}`, true);\n      }\n    }\n\n    function errorCallBack(textStatus) {\n      self.insertContent(`Failed loading gist ${url}: ${textStatus}`, true);\n    }\n\n    // request the json version of this gist\n    loadJSONP(url, {\n      data,\n      beforeSend() {\n        // call onAjaxBeforeSend event\n        if (self.options.onAjaxBeforeSend) {\n          self.options.onAjaxBeforeSend.call(self);\n        }\n\n        // option to enable caching of the gists\n        if (enableCache) {\n          if (cache[cacheUrl]) {\n            // Cached response.\n            if (cache[cacheUrl].div) {\n              successCallback(cache[cacheUrl]);\n\n              return false;\n            }\n\n            // loading the response from cache and preventing the ajax call\n            cache[cacheUrl].done((response) => {\n              successCallback(response);\n            });\n            cache[cacheUrl].fail((errorStatus) => {\n              errorCallBack(errorStatus);\n            });\n\n            return false;\n          }\n\n          // saving the promise for the requested json as a proxy for the actual response\n          cache[cacheUrl] = new Deferred();\n        }\n        return true;\n      },\n      success(response) {\n        // call onAjaxSuccess event\n        if (self.options.onAjaxSuccess) {\n          self.options.onAjaxSuccess.call(self, response);\n        }\n\n        if (enableCache) {\n          if (cache[cacheUrl] && cache[cacheUrl].resolve) {\n            cache[cacheUrl].resolve(response);\n            cache[cacheUrl] = response;\n          }\n        }\n\n        successCallback(response);\n      },\n      error(textStatus) {\n        errorCallBack(textStatus);\n      },\n    });\n\n    // call onInitEnd event\n    if (self.options.onInitEnd) {\n      self.options.onInitEnd.call(self);\n    }\n  }\n\n  destroy() {\n    const self = this;\n\n    // call onDestroy event\n    if (self.options.onDestroy) {\n      self.options.onDestroy.call(self);\n    }\n\n    // remove content\n    self.$container.innerHTML = '';\n\n    // delete GistSimple instance from container\n    delete self.$container.GistSimple;\n\n    // call onDestroyEnd event\n    if (self.options.onDestroyEnd) {\n      self.options.onDestroyEnd.call(self);\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  chunkBy(items, predicate) {\n    if (items.length === 0) {\n      return [];\n    }\n\n    return items.slice(1).reduce(\n      (chunked, item) => {\n        if (predicate(item)) {\n          chunked.push([item]);\n        } else {\n          chunked.push(chunked.pop().concat([item]));\n        }\n\n        return chunked;\n      },\n      [items.slice(0, 1)]\n    );\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  getLineNumbers(lineRangeString) {\n    const lineNumbers = [];\n    let range;\n    let lineNumberSections;\n\n    if (typeof lineRangeString === 'number') {\n      lineNumbers.push(lineRangeString);\n    } else {\n      lineNumberSections = lineRangeString.split(',');\n\n      for (let i = 0; i < lineNumberSections.length; i += 1) {\n        range = lineNumberSections[i].split('-');\n        if (range.length === 2) {\n          for (let j = parseInt(range[0], 10); j <= range[1]; j += 1) {\n            lineNumbers.push(j);\n          }\n        } else if (range.length === 1) {\n          lineNumbers.push(parseInt(range[0], 10));\n        }\n      }\n    }\n    return lineNumbers;\n  }\n\n  // insert content.\n  insertContent(content, wrapper = false) {\n    if (wrapper) {\n      content = `<div class=\"gist-simple-wrap\">${content}</div>`;\n    }\n\n    this.$container.innerHTML = content;\n  }\n\n  // highlight lines.\n  highlightLines(lines) {\n    if (!lines) {\n      return;\n    }\n    const highlightLineNumbers = this.getLineNumbers(lines);\n\n    // we need to set the line-data td to 100% so the highlight expands the whole line\n    this.$container.querySelectorAll('td.line-data').forEach((el) => {\n      el.style.width = '100%';\n    });\n\n    // find all .js-file-line tds (actual code lines) that match the highlightLines and add the highlight class\n    this.$container.querySelectorAll('.js-file-line').forEach((el, index) => {\n      if (highlightLineNumbers.indexOf(index + 1) !== -1) {\n        el.style.backgroundColor = 'rgb(255, 255, 204)';\n      }\n    });\n  }\n\n  // show only specific lines.\n  // value example: \"2\", \"1-5\", \"1,4\", \"1,4,6-8\"\n  showSpecificLines(lines, linesExpanded) {\n    if (!lines) {\n      return;\n    }\n\n    const lineNumbers = this.getLineNumbers(lines);\n    const collapsableLineNumbers = [];\n\n    // find all trs containing code lines that don't exist in the line param\n    this.$container.querySelectorAll('.js-file-line').forEach((el, index) => {\n      if (lineNumbers.indexOf(index + 1) === -1) {\n        if (linesExpanded) {\n          collapsableLineNumbers.push(index + 1);\n\n          el.parentNode.style.display = 'none';\n        } else {\n          el.parentNode.remove();\n        }\n      }\n    });\n\n    // option to expand highlight lines and collapse hidden lines\n    if (linesExpanded) {\n      const collapsableBlocks = this.chunkBy(\n        collapsableLineNumbers,\n        (line) => !collapsableLineNumbers.includes(line - 1)\n      );\n\n      collapsableBlocks.forEach((block) => {\n        const firstLine = block[0];\n        const lineBeforeFirstLine = firstLine - 1;\n        const lastLine = block[block.length - 1];\n\n        const $collapsibleIcon = document.createElement('a');\n        $collapsibleIcon.setAttribute('lines', block.join());\n        $collapsibleIcon.style.display = 'block';\n        $collapsibleIcon.style.cursor = 'pointer';\n        $collapsibleIcon.innerHTML = iconArrow;\n\n        $collapsibleIcon.addEventListener('click', (event) => {\n          event.preventDefault();\n\n          $collapsibleIcon\n            .closest('table.highlight')\n            .querySelectorAll('tr[style*=\"display: none\"] td[data-line-number]')\n            .forEach(function ($element) {\n              const foundLines = $collapsibleIcon.getAttribute('lines').split(',');\n              const lineNumber = $element.getAttribute('data-line-number');\n\n              if (foundLines.indexOf(lineNumber) === -1) {\n                return;\n              }\n\n              $element.parentNode.style.display = '';\n            });\n\n          $collapsibleIcon.closest('tr').remove();\n        });\n\n        const lineNumberElement = `\n          <td\n            class=\"blob-num js-line-number collapsed\"\n            style=\"background-color: #f9f9f9; color: #999; font-size: 12px; font-style: italic; text-align: center; padding-top: 5px !important; padding-bottom: 5px !important;\"\n          ><!-- Icon Here --></td>\n        `;\n\n        const lineCodeElement = `\n          <td\n            class=\"blob-code blob-code-inner js-file-line collapsed\"\n            style=\"background-color: #f9f9f9; color: #999; font-size: 12px; font-style: italic; padding-top: 5px !important; padding-bottom: 5px !important;\"\n          >... Lines ${firstLine} - ${lastLine}</td>\n        `;\n\n        const $lineElement = document.createElement('tr');\n        $lineElement.innerHTML = lineNumberElement + lineCodeElement;\n        $lineElement.querySelector('td:first-child').append($collapsibleIcon);\n\n        const $line = this.$container.querySelector(\n          `.js-line-number[data-line-number=\"${\n            lineBeforeFirstLine === 0 ? 1 : lineBeforeFirstLine\n          }\"]`\n        );\n\n        if ($line) {\n          if (lineBeforeFirstLine === 0) {\n            $line.parentElement.before($lineElement);\n          } else {\n            $line.parentElement.after($lineElement);\n          }\n        }\n      });\n    }\n  }\n\n  // show caption.\n  showCaption(caption) {\n    if (!caption) {\n      return;\n    }\n\n    const tbody = this.$container.querySelector('table tbody');\n    const $row = document.createElement('tr');\n    const $captionColumn = document.createElement('td');\n\n    $captionColumn.setAttribute(\n      'style',\n      'padding: 10px !important; border-bottom: 10px solid white; background-color: #f9f9f9; font-weight: bold;'\n    );\n    $captionColumn.innerHTML = caption;\n\n    const $rowBorder = document.createElement('td');\n    $rowBorder.setAttribute('style', 'background-color: #f9f9f9; border-bottom: 10px solid white;');\n\n    $row.append($rowBorder);\n    $row.append($captionColumn);\n    tbody.prepend($row);\n  }\n\n  // remove footer.\n  removeFooter() {\n    this.$container.querySelector('.gist-meta').remove();\n\n    // present a uniformed border when footer is hidden\n    this.$container.querySelector('.gist-data').style.borderBottom = '0px';\n    this.$container.querySelector('.gist-file').style.borderBottom = '1px solid #ddd';\n  }\n\n  // remove line numbers.\n  removeLineNumbers() {\n    this.$container.querySelectorAll('.js-line-number').forEach((el) => {\n      el.remove();\n    });\n    this.$container.querySelector('table.highlight').style.width = '100%';\n  }\n}\n\n// global definition\nconst gistSimple = function (items, options, ...args) {\n  // check for dom element\n  // thanks: http://stackoverflow.com/questions/384286/javascript-isdom-how-do-you-check-if-a-javascript-object-is-a-dom-object\n  if (\n    typeof HTMLElement === 'object'\n      ? items instanceof HTMLElement\n      : items &&\n        typeof items === 'object' &&\n        items !== null &&\n        items.nodeType === 1 &&\n        typeof items.nodeName === 'string'\n  ) {\n    items = [items];\n  }\n\n  const len = items.length;\n  let k = 0;\n  let ret;\n\n  for (k; k < len; k += 1) {\n    if (typeof options === 'object' || typeof options === 'undefined') {\n      if (!items[k].GistSimple) {\n        items[k].GistSimple = new GistSimple(items[k], options);\n      }\n    } else if (items[k].GistSimple) {\n      // eslint-disable-next-line prefer-spread\n      ret = items[k].GistSimple[options].apply(items[k].GistSimple, args);\n    }\n    if (typeof ret !== 'undefined') {\n      return ret;\n    }\n  }\n\n  return items;\n};\ngistSimple.constructor = GistSimple;\n\nexport default gistSimple;\n","import domReady from './utils/ready';\nimport global from './utils/global';\nimport gistSimple from './core';\n\nconst $ = global.jQuery;\n\n// jQuery support\nif (typeof $ !== 'undefined') {\n  const $Plugin = function (...args) {\n    Array.prototype.unshift.call(args, this);\n    const res = gistSimple.apply(global, args);\n    return typeof res !== 'object' ? res : this;\n  };\n  $Plugin.constructor = gistSimple.constructor;\n\n  // no conflict\n  const old$Plugin = $.fn.gistSimple;\n  $.fn.gistSimple = $Plugin;\n  $.fn.gistSimple.noConflict = function () {\n    $.fn.gistSimple = old$Plugin;\n    return this;\n  };\n}\n\n// dom ready initialization\ndomReady(() => {\n  gistSimple(document.querySelectorAll('.gist-simple[data-id]'));\n});\n\nexport default gistSimple;\n"],"names":["g","f","exports","module","define","amd","globalThis","self","gistSimple","this","win","window","global","global$1","extend","out","args","Object","keys","forEach","i","key","Deferred","doneCallbacks","failCallbacks","prototype","execute","list","length","Array","slice","call","apply","resolve","reject","done","callback","push","fail","NAME_FLAG","LOADED_FLAG","defaults","id","file","caption","lines","linesExpanded","highlightLines","showFooter","showLineNumbers","enableCache","onInit","onInitEnd","onDestroy","onDestroyEnd","onAjaxBeforeSend","onAjaxSuccess","onAjaxLoaded","cache","instanceID","GistSimple","constructor","container","userOptions","$container","dataOptions","dataset","pureDataOptions","options","pureOptions","init","url","data","classList","add","insertContent","cacheUrl","insertGist","response","$responseDiv","document","createElement","innerHTML","div","firstChild","removeAttribute","showSpecificLines","showCaption","removeFooter","removeLineNumbers","successCallback","stylesheet","indexOf","replace","match","el","body","querySelector","href","rel","type","head","appendChild","addEventListener","loadCSS","errorCallBack","textStatus","params","beforeSend","success","k","script","src","removeChild","loadJSONP","errorStatus","error","destroy","chunkBy","items","predicate","reduce","chunked","item","pop","concat","getLineNumbers","lineRangeString","lineNumbers","range","lineNumberSections","split","j","parseInt","content","wrapper","highlightLineNumbers","querySelectorAll","style","width","index","backgroundColor","collapsableLineNumbers","parentNode","display","remove","line","includes","block","firstLine","lineBeforeFirstLine","lastLine","$collapsibleIcon","setAttribute","join","cursor","event","preventDefault","closest","$element","foundLines","getAttribute","lineNumber","lineCodeElement","$lineElement","append","$line","parentElement","before","after","tbody","$row","$captionColumn","$rowBorder","prepend","borderBottom","HTMLElement","nodeType","nodeName","len","ret","$","jQuery","$Plugin","unshift","res","old$Plugin","fn","noConflict","readyState","capture","once","passive"],"mappings":"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"}