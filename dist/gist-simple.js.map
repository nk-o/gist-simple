{"version":3,"file":"gist-simple.js","sources":["../src/utils/ready.js","../src/utils/global.js","../src/utils/extend.js","../src/utils/deferred.js","../src/utils/load-jsonp.js","../src/utils/load-css.js","../src/defaults.js","../src/core.js","../src/core.umd.js"],"sourcesContent":["/**\n * Document ready callback.\n * @param {Function} callback - callback will be fired once Document ready.\n */\nfunction ready(callback) {\n  if (document.readyState === 'complete' || document.readyState === 'interactive') {\n    // Already ready or interactive, execute callback\n    callback();\n  } else {\n    document.addEventListener('DOMContentLoaded', callback, {\n      capture: true,\n      once: true,\n      passive: true,\n    });\n  }\n}\n\nexport default ready;\n","/* eslint-disable import/no-mutable-exports */\n/* eslint-disable no-restricted-globals */\nlet win;\n\nif (typeof window !== 'undefined') {\n  win = window;\n} else if (typeof global !== 'undefined') {\n  win = global;\n} else if (typeof self !== 'undefined') {\n  win = self;\n} else {\n  win = {};\n}\n\nexport default win;\n","/**\n * Extend like jQuery.extend\n *\n * @param {Object} out - output object.\n * @param {...any} args - additional objects to extend.\n *\n * @returns {Object}\n */\nexport default function extend(out, ...args) {\n  out = out || {};\n\n  Object.keys(args).forEach((i) => {\n    if (!args[i]) {\n      return;\n    }\n    Object.keys(args[i]).forEach((key) => {\n      out[key] = args[i][key];\n    });\n  });\n\n  return out;\n}\n","// Deferred\n// thanks http://stackoverflow.com/questions/18096715/implement-deferred-object-without-using-jquery\nfunction Deferred() {\n  this.doneCallbacks = [];\n  this.failCallbacks = [];\n}\n\nDeferred.prototype = {\n  execute(list, args) {\n    let i = list.length;\n    // eslint-disable-next-line no-param-reassign\n    args = Array.prototype.slice.call(args);\n\n    while (i) {\n      i -= 1;\n      list[i].apply(null, args);\n    }\n  },\n  resolve(...args) {\n    this.execute(this.doneCallbacks, args);\n  },\n  reject(...args) {\n    this.execute(this.failCallbacks, args);\n  },\n  done(callback) {\n    this.doneCallbacks.push(callback);\n  },\n  fail(callback) {\n    this.failCallbacks.push(callback);\n  },\n};\n\nexport default Deferred;\n","/**\n * Load JSONP url with callback.\n *\n * @thanks https://gist.github.com/gf3/132080/110d1b68d7328d7bfe7e36617f7df85679a08968\n */\nconst NAME_FLAG = '__gist_simple_jsonp__';\n\nexport default function loadJSONP(url, params) {\n  const { data = {}, beforeSend, success } = params;\n\n  window[NAME_FLAG] = (window[NAME_FLAG] || 0) + 1;\n\n  // Add callback function name.\n  data.callback = `${NAME_FLAG}_cb_${window[NAME_FLAG]}`;\n\n  // Add params to URL.\n  Object.keys(data).forEach((k) => {\n    if (url.match(/\\?/)) {\n      url += `&${k}=${data[k]}`;\n    } else {\n      url += `?${k}=${data[k]}`;\n    }\n  });\n\n  if (beforeSend && !beforeSend()) {\n    return;\n  }\n\n  // Create script\n  let script = document.createElement('script');\n  script.type = 'text/javascript';\n  script.src = url;\n\n  // Setup handler\n  window[data.callback] = function (response) {\n    success.call(window, response);\n    document.head.removeChild(script);\n    script = null;\n    delete window[data.callback];\n  };\n\n  // Load JSON\n  document.head.appendChild(script);\n}\n","/**\n * Load CSS with callback\n */\nconst LOADED_FLAG = '__gist_simple_css_loaded__';\n\nexport default function loadCSS(url, callback, doc = document) {\n  // Already exists.\n  let el = doc.body.querySelector(`link[href=\"${url}\"]`);\n\n  if (!el) {\n    el = doc.createElement('link');\n\n    el.href = url;\n    el.rel = 'stylesheet';\n    el.type = 'text/css';\n\n    doc.head.appendChild(el);\n  }\n\n  if (callback) {\n    // Is loaded already.\n    if (el[LOADED_FLAG]) {\n      callback(el);\n      return;\n    }\n\n    // Add listener.\n    el.addEventListener(\n      'load',\n      () => {\n        el[LOADED_FLAG] = true;\n\n        callback(el);\n      },\n      false\n    );\n  }\n}\n","export default {\n  id: '',\n  theme: 'system',\n  file: '',\n  caption: '',\n  lines: '',\n  linesExpanded: false,\n  highlightLines: '',\n  showFooter: true,\n  showLineNumbers: true,\n  enableCache: true,\n\n  onInit: null, // () => {}\n  onInitEnd: null, // () => {}\n  onDestroy: null, // () => {}\n  onDestroyEnd: null, // () => {}\n  onAjaxBeforeSend: null, // () => {}\n  onAjaxSuccess: null, // (response) => {}\n  onAjaxLoaded: null, // () => {}\n};\n","import extend from './utils/extend';\nimport Deferred from './utils/deferred';\nimport loadJSONP from './utils/load-jsonp';\nimport loadCSS from './utils/load-css';\nimport iconArrow from './icons/arrow.svg';\nimport defaults from './defaults';\n\nconst cache = {};\nlet instanceID = 0;\n\nconst loadingIcon = '<span class=\"gist-simple-loading-icon\"><i></i><i></i><i></i></span>';\n\n// Gist Simple class\nclass GistSimple {\n  constructor(container, userOptions) {\n    const self = this;\n\n    self.instanceID = instanceID;\n\n    instanceID += 1;\n\n    self.$container = container;\n\n    self.defaults = { ...defaults };\n\n    // prepare data-options\n    const dataOptions = self.$container.dataset || {};\n    const pureDataOptions = {};\n    Object.keys(dataOptions).forEach((key) => {\n      if (key && typeof self.defaults[key] !== 'undefined') {\n        pureDataOptions[key] = dataOptions[key];\n      }\n    });\n\n    self.options = extend({}, self.defaults, pureDataOptions, userOptions);\n    self.pureOptions = extend({}, self.options);\n\n    // prepare 'true' and 'false' strings to boolean\n    Object.keys(self.options).forEach((key) => {\n      if (self.options[key] === 'true') {\n        self.options[key] = true;\n      } else if (self.options[key] === 'false') {\n        self.options[key] = false;\n      }\n    });\n\n    self.init();\n  }\n\n  init() {\n    const self = this;\n    const { options } = self;\n    const url = `https://gist.github.com/${options.id}.json`;\n    const { lines } = options;\n    const data = {};\n\n    // call onInit event\n    if (self.options.onInit) {\n      self.options.onInit.call(self);\n    }\n\n    if (options.file) {\n      data.file = options.file;\n    }\n\n    self.$container.classList.add('gist-simple');\n\n    if (options.theme === 'dark' || options.theme === 'system') {\n      self.$container.classList.add(`gist-simple-${options.theme}`);\n    }\n\n    // if the id doesn't exist, then ignore the code block\n    if (!options.id) {\n      self.insertContent('Gist ID is required', true);\n      return;\n    }\n\n    const cacheUrl = url + options.file;\n    const enableCache = options.enableCache || cache[cacheUrl];\n\n    // show preloader.\n    self.insertContent(loadingIcon, true);\n\n    function insertGist(response) {\n      // reference to div\n      const $responseDiv = document.createElement('div');\n      $responseDiv.innerHTML = response.div;\n\n      // remove id for uniqueness constraints\n      if ($responseDiv.firstChild) {\n        $responseDiv.firstChild.removeAttribute('id');\n      }\n\n      self.insertContent($responseDiv.innerHTML);\n\n      // highlight lines\n      self.highlightLines(options.highlightLines);\n\n      // show only specific lines\n      self.showSpecificLines(lines, options.linesExpanded);\n\n      // show caption\n      self.showCaption(options.caption);\n\n      // remove footer\n      if (!options.showFooter) {\n        self.removeFooter();\n      }\n\n      // remove line numbers\n      if (!options.showLineNumbers) {\n        self.removeLineNumbers();\n      }\n\n      // call onAjaxLoaded event\n      if (self.options.onAjaxLoaded) {\n        self.options.onAjaxLoaded.call(self, response);\n      }\n    }\n\n    function successCallback(response) {\n      // the html payload is in the div property\n      if (response && response.div) {\n        let { stylesheet } = response;\n\n        // github returns /assets/embed-id.css now, but let's be sure about that\n        if (stylesheet) {\n          // github passes down html instead of a url for the stylesheet now\n          // parse off the href\n          if (stylesheet.indexOf('<link') === 0) {\n            stylesheet = stylesheet.replace(/\\\\/g, '').match(/href=\"([^\\s]*)\"/);\n            [stylesheet] = stylesheet;\n          } else if (stylesheet.indexOf('http') !== 0) {\n            // add leading slash if missing\n            if (stylesheet.indexOf('/') !== 0) {\n              stylesheet = `/${stylesheet}`;\n            }\n            stylesheet = `https://gist.github.com${stylesheet}`;\n          }\n\n          // Insert gist only after CSS loaded.\n          loadCSS(\n            stylesheet,\n            () => {\n              insertGist(response);\n            },\n            self.$container.ownerDocument\n          );\n        } else {\n          insertGist(response);\n        }\n      } else {\n        self.insertContent(`Failed loading gist ${url}`, true);\n      }\n    }\n\n    function errorCallBack(textStatus) {\n      self.insertContent(`Failed loading gist ${url}: ${textStatus}`, true);\n    }\n\n    // request the json version of this gist\n    loadJSONP(url, {\n      data,\n      beforeSend() {\n        // call onAjaxBeforeSend event\n        if (self.options.onAjaxBeforeSend) {\n          self.options.onAjaxBeforeSend.call(self);\n        }\n\n        // option to enable caching of the gists\n        if (enableCache) {\n          if (cache[cacheUrl]) {\n            // Cached response.\n            if (cache[cacheUrl].div) {\n              successCallback(cache[cacheUrl]);\n\n              return false;\n            }\n\n            // loading the response from cache and preventing the ajax call\n            cache[cacheUrl].done((response) => {\n              successCallback(response);\n            });\n            cache[cacheUrl].fail((errorStatus) => {\n              errorCallBack(errorStatus);\n            });\n\n            return false;\n          }\n\n          // saving the promise for the requested json as a proxy for the actual response\n          cache[cacheUrl] = new Deferred();\n        }\n        return true;\n      },\n      success(response) {\n        // call onAjaxSuccess event\n        if (self.options.onAjaxSuccess) {\n          self.options.onAjaxSuccess.call(self, response);\n        }\n\n        if (enableCache) {\n          if (cache[cacheUrl] && cache[cacheUrl].resolve) {\n            cache[cacheUrl].resolve(response);\n            cache[cacheUrl] = response;\n          }\n        }\n\n        successCallback(response);\n      },\n      error(textStatus) {\n        errorCallBack(textStatus);\n      },\n    });\n\n    // call onInitEnd event\n    if (self.options.onInitEnd) {\n      self.options.onInitEnd.call(self);\n    }\n  }\n\n  destroy() {\n    const self = this;\n\n    // call onDestroy event\n    if (self.options.onDestroy) {\n      self.options.onDestroy.call(self);\n    }\n\n    // remove content\n    self.$container.innerHTML = '';\n\n    // delete GistSimple instance from container\n    delete self.$container.GistSimple;\n\n    // call onDestroyEnd event\n    if (self.options.onDestroyEnd) {\n      self.options.onDestroyEnd.call(self);\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  chunkBy(items, predicate) {\n    if (items.length === 0) {\n      return [];\n    }\n\n    return items.slice(1).reduce(\n      (chunked, item) => {\n        if (predicate(item)) {\n          chunked.push([item]);\n        } else {\n          chunked.push(chunked.pop().concat([item]));\n        }\n\n        return chunked;\n      },\n      [items.slice(0, 1)]\n    );\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  getLineNumbers(lineRangeString) {\n    const lineNumbers = [];\n    let range;\n    let lineNumberSections;\n\n    if (typeof lineRangeString === 'number') {\n      lineNumbers.push(lineRangeString);\n    } else {\n      lineNumberSections = lineRangeString.split(',');\n\n      for (let i = 0; i < lineNumberSections.length; i += 1) {\n        range = lineNumberSections[i].split('-');\n        if (range.length === 2) {\n          for (let j = parseInt(range[0], 10); j <= range[1]; j += 1) {\n            lineNumbers.push(j);\n          }\n        } else if (range.length === 1) {\n          lineNumbers.push(parseInt(range[0], 10));\n        }\n      }\n    }\n    return lineNumbers;\n  }\n\n  // insert content.\n  insertContent(content, wrapper = false) {\n    if (wrapper) {\n      content = `<div class=\"gist-simple-wrap\">${content}</div>`;\n    }\n\n    this.$container.innerHTML = content;\n  }\n\n  // highlight lines.\n  highlightLines(lines) {\n    if (!lines) {\n      return;\n    }\n    const highlightLineNumbers = this.getLineNumbers(lines);\n\n    // we need to set the line-data td to 100% so the highlight expands the whole line\n    this.$container.querySelectorAll('td.line-data').forEach((el) => {\n      el.style.width = '100%';\n    });\n\n    // find all .js-file-line tds (actual code lines) that match the highlightLines and add the highlight class\n    this.$container.querySelectorAll('.js-file-line').forEach((el, index) => {\n      if (highlightLineNumbers.indexOf(index + 1) !== -1) {\n        el.classList.add('gist-simple-highlighted-line');\n      }\n    });\n  }\n\n  // show only specific lines.\n  // value example: \"2\", \"1-5\", \"1,4\", \"1,4,6-8\"\n  showSpecificLines(lines, linesExpanded) {\n    if (!lines) {\n      return;\n    }\n\n    const lineNumbers = this.getLineNumbers(lines);\n    const collapsableLineNumbers = [];\n\n    // find all trs containing code lines that don't exist in the line param\n    this.$container.querySelectorAll('.js-file-line').forEach((el, index) => {\n      if (lineNumbers.indexOf(index + 1) === -1) {\n        if (linesExpanded) {\n          collapsableLineNumbers.push(index + 1);\n\n          el.parentNode.style.display = 'none';\n        } else {\n          el.parentNode.remove();\n        }\n      }\n    });\n\n    // option to expand highlight lines and collapse hidden lines\n    if (linesExpanded) {\n      const collapsableBlocks = this.chunkBy(\n        collapsableLineNumbers,\n        (line) => !collapsableLineNumbers.includes(line - 1)\n      );\n\n      collapsableBlocks.forEach((block) => {\n        const firstLine = block[0];\n        const lineBeforeFirstLine = firstLine - 1;\n        const lastLine = block[block.length - 1];\n\n        const $collapsibleIcon = document.createElement('a');\n        $collapsibleIcon.setAttribute('lines', block.join());\n        $collapsibleIcon.style.display = 'block';\n        $collapsibleIcon.style.cursor = 'pointer';\n        $collapsibleIcon.innerHTML = iconArrow;\n\n        $collapsibleIcon.addEventListener('click', (event) => {\n          event.preventDefault();\n\n          $collapsibleIcon\n            .closest('table.highlight')\n            .querySelectorAll('tr[style*=\"display: none\"] td[data-line-number]')\n            .forEach(function ($element) {\n              const foundLines = $collapsibleIcon.getAttribute('lines').split(',');\n              const lineNumber = $element.getAttribute('data-line-number');\n\n              if (foundLines.indexOf(lineNumber) === -1) {\n                return;\n              }\n\n              $element.parentNode.style.display = '';\n            });\n\n          $collapsibleIcon.closest('tr').remove();\n        });\n\n        const lineNumberElement = `\n          <td class=\"blob-num js-line-number collapsed\"><!-- Icon Here --></td>\n        `;\n\n        const lineCodeElement = `\n          <td class=\"blob-code blob-code-inner js-file-line collapsed\">... Lines ${firstLine} - ${lastLine}</td>\n        `;\n\n        const $lineElement = document.createElement('tr');\n        $lineElement.innerHTML = lineNumberElement + lineCodeElement;\n        $lineElement.querySelector('td:first-child').append($collapsibleIcon);\n\n        const $line = this.$container.querySelector(\n          `.js-line-number[data-line-number=\"${\n            lineBeforeFirstLine === 0 ? 1 : lineBeforeFirstLine\n          }\"]`\n        );\n\n        if ($line) {\n          if (lineBeforeFirstLine === 0) {\n            $line.parentElement.before($lineElement);\n          } else {\n            $line.parentElement.after($lineElement);\n          }\n        }\n      });\n    }\n  }\n\n  // show caption.\n  showCaption(caption) {\n    if (!caption) {\n      return;\n    }\n\n    const tbody = this.$container.querySelector('table tbody');\n    const $row = document.createElement('tr');\n    const $captionColumn = document.createElement('td');\n\n    $row.classList.add('gist-simple-caption');\n    $captionColumn.innerHTML = caption;\n\n    const $rowBorder = document.createElement('td');\n\n    $row.append($rowBorder);\n    $row.append($captionColumn);\n    tbody.prepend($row);\n  }\n\n  // remove footer.\n  removeFooter() {\n    this.$container.querySelector('.gist-meta').remove();\n\n    // present a uniformed border when footer is hidden\n    this.$container.querySelector('.gist-data').style.borderBottom = '0px';\n    this.$container.querySelector('.gist-file').style.borderBottom = '1px solid #ddd';\n  }\n\n  // remove line numbers.\n  removeLineNumbers() {\n    this.$container.querySelectorAll('.js-line-number').forEach((el) => {\n      el.remove();\n    });\n    this.$container.querySelector('table.highlight').style.width = '100%';\n  }\n}\n\n// global definition\nconst gistSimple = function (items, options, ...args) {\n  // check for dom element\n  // thanks: http://stackoverflow.com/questions/384286/javascript-isdom-how-do-you-check-if-a-javascript-object-is-a-dom-object\n  if (\n    typeof HTMLElement === 'object'\n      ? items instanceof HTMLElement\n      : items &&\n        typeof items === 'object' &&\n        items !== null &&\n        items.nodeType === 1 &&\n        typeof items.nodeName === 'string'\n  ) {\n    items = [items];\n  }\n\n  const len = items.length;\n  let k = 0;\n  let ret;\n\n  for (k; k < len; k += 1) {\n    if (typeof options === 'object' || typeof options === 'undefined') {\n      if (!items[k].GistSimple) {\n        items[k].GistSimple = new GistSimple(items[k], options);\n      }\n    } else if (items[k].GistSimple) {\n      // eslint-disable-next-line prefer-spread\n      ret = items[k].GistSimple[options].apply(items[k].GistSimple, args);\n    }\n    if (typeof ret !== 'undefined') {\n      return ret;\n    }\n  }\n\n  return items;\n};\ngistSimple.constructor = GistSimple;\n\nexport default gistSimple;\n","import domReady from './utils/ready';\nimport global from './utils/global';\nimport gistSimple from './core';\n\nconst $ = global.jQuery;\n\n// jQuery support\nif (typeof $ !== 'undefined') {\n  const $Plugin = function (...args) {\n    Array.prototype.unshift.call(args, this);\n    const res = gistSimple.apply(global, args);\n    return typeof res !== 'object' ? res : this;\n  };\n  $Plugin.constructor = gistSimple.constructor;\n\n  // no conflict\n  const old$Plugin = $.fn.gistSimple;\n  $.fn.gistSimple = $Plugin;\n  $.fn.gistSimple.noConflict = function () {\n    $.fn.gistSimple = old$Plugin;\n    return this;\n  };\n}\n\n// dom ready initialization\ndomReady(() => {\n  gistSimple(document.querySelectorAll('.gist-simple[data-id]'));\n});\n\nexport default gistSimple;\n"],"names":["ready","callback","document","readyState","addEventListener","capture","once","passive","win","window","global","self","extend","out","args","Object","keys","forEach","i","key","Deferred","doneCallbacks","failCallbacks","prototype","execute","list","length","Array","slice","call","apply","resolve","reject","done","push","fail","NAME_FLAG","loadJSONP","url","params","data","beforeSend","success","k","match","script","createElement","type","src","response","head","removeChild","appendChild","LOADED_FLAG","loadCSS","doc","el","body","querySelector","href","rel","id","theme","file","caption","lines","linesExpanded","highlightLines","showFooter","showLineNumbers","enableCache","onInit","onInitEnd","onDestroy","onDestroyEnd","onAjaxBeforeSend","onAjaxSuccess","onAjaxLoaded","cache","instanceID","loadingIcon","GistSimple","constructor","container","userOptions","$container","defaults","dataOptions","dataset","pureDataOptions","options","pureOptions","init","classList","add","insertContent","cacheUrl","insertGist","$responseDiv","innerHTML","div","firstChild","removeAttribute","showSpecificLines","showCaption","removeFooter","removeLineNumbers","successCallback","stylesheet","indexOf","replace","ownerDocument","errorCallBack","textStatus","errorStatus","error","destroy","chunkBy","items","predicate","reduce","chunked","item","pop","concat","getLineNumbers","lineRangeString","lineNumbers","range","lineNumberSections","split","j","parseInt","content","wrapper","highlightLineNumbers","querySelectorAll","style","width","index","collapsableLineNumbers","parentNode","display","remove","collapsableBlocks","line","includes","block","firstLine","lineBeforeFirstLine","lastLine","$collapsibleIcon","setAttribute","join","cursor","iconArrow","event","preventDefault","closest","$element","foundLines","getAttribute","lineNumber","lineNumberElement","lineCodeElement","$lineElement","append","$line","parentElement","before","after","tbody","$row","$captionColumn","$rowBorder","prepend","borderBottom","gistSimple","HTMLElement","nodeType","nodeName","len","ret","$","jQuery","$Plugin","unshift","res","old$Plugin","fn","noConflict","domReady"],"mappings":"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"}